# ç›ˆç±³é‡‘èæ•™å­¦å¹³å° - äº‘ç«¯éƒ¨ç½²æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. é…ç½®å¯†é’¥æ–‡ä»¶

å¤åˆ¶ç¤ºä¾‹æ–‡ä»¶å¹¶å¡«å…¥çœŸå®å¯†é’¥ï¼š

```bash
cd web_app
cp .streamlit/secrets.toml.example .streamlit/secrets.toml
```

ç¼–è¾‘ `.streamlit/secrets.toml`ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š

- **MCP_API_KEY**: ç›ˆç±³MCP APIå¯†é’¥
- **JWT_SECRET**: JWTå¯†é’¥ï¼ˆå»ºè®®ä½¿ç”¨éšæœºç”Ÿæˆçš„é•¿å­—ç¬¦ä¸²ï¼‰

### 2. æµ‹è¯•æœ¬åœ°è¿è¡Œ

```bash
# å®‰è£…ä¾èµ–
pip install -r requirements.txt

# å¯åŠ¨åº”ç”¨
streamlit run app.py
```

ç¡®ä¿åº”ç”¨åœ¨ `http://localhost:8501` æ­£å¸¸è¿è¡Œã€‚

## ğŸ³ Dockeréƒ¨ç½²

### æ–¹æ³•1: ä½¿ç”¨Docker Composeï¼ˆæ¨èï¼‰

```bash
# æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# åœæ­¢æœåŠ¡
docker-compose down
```

### æ–¹æ³•2: ç›´æ¥ä½¿ç”¨Docker

```bash
# æ„å»ºé•œåƒ
docker build -t finance-edu-platform .

# è¿è¡Œå®¹å™¨
docker run -d \
  -p 8501:8501 \
  -v $(pwd)/data:/app/data \
  -v $(pwd)/.streamlit/secrets.toml:/app/.streamlit/secrets.toml:ro \
  --name finance-edu \
  finance-edu-platform

# æŸ¥çœ‹æ—¥å¿—
docker logs -f finance-edu

# åœæ­¢å®¹å™¨
docker stop finance-edu
docker rm finance-edu
```

è®¿é—®: `http://localhost:8501`

## â˜ï¸ Streamlit Cloudéƒ¨ç½²

### æ­¥éª¤1: å‡†å¤‡GitHubä»“åº“

```bash
# åˆå§‹åŒ–Gitä»“åº“
git init
git add .
git commit -m "Initial commit"

# æ¨é€åˆ°GitHub
git remote add origin https://github.com/yourusername/finance-edu.git
git push -u origin main
```

### æ­¥éª¤2: éƒ¨ç½²åˆ°Streamlit Cloud

1. è®¿é—® [share.streamlit.io](https://share.streamlit.io)
2. ä½¿ç”¨GitHubè´¦å·ç™»å½•
3. ç‚¹å‡» **New app**
4. é€‰æ‹©ä½ çš„ä»“åº“å’Œåˆ†æ”¯
5. è®¾ç½®ä¸»æ–‡ä»¶è·¯å¾„: `web_app/app.py`
6. ç‚¹å‡» **Deploy**

### æ­¥éª¤3: é…ç½®å¯†é’¥

åœ¨Streamlit Cloudæ§åˆ¶å°ï¼š

1. è¿›å…¥ **App settings** â†’ **Secrets**
2. ç²˜è´´ `.streamlit/secrets.toml` çš„å†…å®¹
3. ä¿å­˜å¹¶é‡å¯åº”ç”¨

**ä¼˜ç‚¹**:
- âœ… å®Œå…¨å…è´¹
- âœ… è‡ªåŠ¨HTTPS
- âœ… è‡ªåŠ¨éƒ¨ç½²ï¼ˆGitæ¨é€åï¼‰
- âœ… ç®€å•æ˜“ç”¨

**é™åˆ¶**:
- âš ï¸ èµ„æºé™åˆ¶ï¼ˆ1GBå†…å­˜ï¼‰
- âš ï¸ å…¬å¼€åº”ç”¨ï¼ˆé™¤éä»˜è´¹ï¼‰

## ğŸš€ Herokuéƒ¨ç½²

### æ­¥éª¤1: å‡†å¤‡Herokuç¯å¢ƒ

```bash
# å®‰è£…Heroku CLI
# macOS
brew tap heroku/brew && brew install heroku

# Windows
# ä¸‹è½½å®‰è£…: https://devcenter.heroku.com/articles/heroku-cli

# ç™»å½•Heroku
heroku login
```

### æ­¥éª¤2: åˆ›å»ºHerokuåº”ç”¨

```bash
# åˆ›å»ºåº”ç”¨
heroku create finance-edu-platform

# æ·»åŠ Python buildpack
heroku buildpacks:set heroku/python

# è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå¯†é’¥ï¼‰
heroku config:set MCP_API_KEY="your_mcp_api_key"
heroku config:set JWT_SECRET="your_jwt_secret"
```

### æ­¥éª¤3: éƒ¨ç½²åº”ç”¨

```bash
# éƒ¨ç½²
git push heroku main

# æŸ¥çœ‹æ—¥å¿—
heroku logs --tail

# æ‰“å¼€åº”ç”¨
heroku open
```

### æ­¥éª¤4: é…ç½®æ•°æ®åº“ï¼ˆå¯é€‰ï¼‰

```bash
# æ·»åŠ PostgreSQL
heroku addons:create heroku-postgresql:hobby-dev

# æŸ¥çœ‹æ•°æ®åº“URL
heroku config:get DATABASE_URL
```

**ä¼˜ç‚¹**:
- âœ… æ˜“äºæ‰©å±•
- âœ… å…è´¹é¢åº¦ï¼ˆ550å°æ—¶/æœˆï¼‰
- âœ… æ”¯æŒè‡ªå®šä¹‰åŸŸå

**é™åˆ¶**:
- âš ï¸ å…è´¹ç‰ˆä¼šä¼‘çœ ï¼ˆ30åˆ†é’Ÿæ— æ´»åŠ¨ï¼‰
- âš ï¸ éœ€è¦ä¿¡ç”¨å¡éªŒè¯

## â˜ï¸ AWSéƒ¨ç½²

### ä½¿ç”¨AWS Lightsail

#### æ­¥éª¤1: åˆ›å»ºå®ä¾‹

```bash
# ä½¿ç”¨AWS CLIåˆ›å»ºå®ä¾‹
aws lightsail create-instances \
  --instance-names finance-edu \
  --availability-zone us-east-1a \
  --blueprint-id ubuntu_20_04 \
  --bundle-id micro_2_0
```

#### æ­¥éª¤2: è¿æ¥å¹¶é…ç½®æœåŠ¡å™¨

```bash
# SSHè¿æ¥
ssh ubuntu@your-instance-ip

# å®‰è£…Docker
curl -fsSL https://get.docker.com -o get-docker.sh
sh get-docker.sh

# å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# å…‹éš†ä»£ç 
git clone https://github.com/yourusername/finance-edu.git
cd finance-edu/web_app

# é…ç½®å¯†é’¥
nano .streamlit/secrets.toml

# å¯åŠ¨åº”ç”¨
docker-compose up -d
```

#### æ­¥éª¤3: é…ç½®é˜²ç«å¢™

åœ¨AWS Lightsailæ§åˆ¶å°ï¼š
1. è¿›å…¥å®ä¾‹çš„ **Networking** æ ‡ç­¾
2. æ·»åŠ é˜²ç«å¢™è§„åˆ™: TCP 8501

è®¿é—®: `http://your-instance-ip:8501`

## â˜ï¸ é˜¿é‡Œäº‘éƒ¨ç½²

### ä½¿ç”¨é˜¿é‡Œäº‘ECS

#### æ­¥éª¤1: åˆ›å»ºECSå®ä¾‹

1. ç™»å½•é˜¿é‡Œäº‘æ§åˆ¶å°
2. é€‰æ‹© **äº‘æœåŠ¡å™¨ECS** â†’ **å®ä¾‹**
3. åˆ›å»ºå®ä¾‹ï¼ˆé€‰æ‹©Ubuntu 20.04ï¼‰
4. é…ç½®å®‰å…¨ç»„ï¼Œå¼€æ”¾8501ç«¯å£

#### æ­¥éª¤2: éƒ¨ç½²åº”ç”¨

```bash
# SSHè¿æ¥
ssh root@your-ecs-ip

# å®‰è£…Docker
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun

# å®‰è£…Docker Compose
curl -L https://get.daocloud.io/docker/compose/releases/download/v2.20.0/docker-compose-`uname -s`-`uname -m` > /usr/local/bin/docker-compose
chmod +x /usr/local/bin/docker-compose

# å…‹éš†ä»£ç 
git clone https://github.com/yourusername/finance-edu.git
cd finance-edu/web_app

# é…ç½®å¯†é’¥
vi .streamlit/secrets.toml

# å¯åŠ¨åº”ç”¨
docker-compose up -d
```

#### æ­¥éª¤3: é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

1. è´­ä¹°åŸŸå
2. æ·»åŠ Aè®°å½•æŒ‡å‘ECSå…¬ç½‘IP
3. é…ç½®Nginxåå‘ä»£ç†ï¼ˆå¯é€‰ï¼‰

```nginx
server {
    listen 80;
    server_name your-domain.com;

    location / {
        proxy_pass http://localhost:8501;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
}
```

## ğŸ”’ HTTPSé…ç½®

### ä½¿ç”¨Certbotï¼ˆLet's Encryptï¼‰

```bash
# å®‰è£…Certbot
sudo apt-get update
sudo apt-get install certbot python3-certbot-nginx

# è·å–è¯ä¹¦
sudo certbot --nginx -d your-domain.com

# è‡ªåŠ¨ç»­æœŸ
sudo certbot renew --dry-run
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®åº“ä¼˜åŒ–

- ä½¿ç”¨PostgreSQLæ›¿ä»£SQLiteï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- å¯ç”¨æ•°æ®åº“è¿æ¥æ± 
- æ·»åŠ ç´¢å¼•

### 2. ç¼“å­˜ä¼˜åŒ–

```python
# åœ¨utils/mcp_client.pyä¸­å·²å®ç°
@st.cache_data(ttl=300)  # 5åˆ†é’Ÿç¼“å­˜
def search_funds(...):
    ...
```

### 3. èµ„æºé™åˆ¶

åœ¨Dockerä¸­é™åˆ¶èµ„æºä½¿ç”¨ï¼š

```yaml
services:
  web:
    deploy:
      resources:
        limits:
          cpus: '1'
          memory: 1G
        reservations:
          cpus: '0.5'
          memory: 512M
```

## ğŸ” ç›‘æ§å’Œæ—¥å¿—

### æŸ¥çœ‹åº”ç”¨æ—¥å¿—

```bash
# Docker Compose
docker-compose logs -f web

# Docker
docker logs -f finance-edu

# Heroku
heroku logs --tail

# Streamlit Cloud
# åœ¨æ§åˆ¶å°æŸ¥çœ‹ Logs æ ‡ç­¾
```

### å¥åº·æ£€æŸ¥

åº”ç”¨æä¾›å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š

```bash
curl http://your-domain:8501/_stcore/health
```

## ğŸ› å¸¸è§é—®é¢˜

### Q1: Dockerå®¹å™¨å¯åŠ¨å¤±è´¥

**æ£€æŸ¥æ—¥å¿—**:
```bash
docker-compose logs web
```

**å¸¸è§åŸå› **:
- ç«¯å£è¢«å ç”¨
- å¯†é’¥æ–‡ä»¶æœªé…ç½®
- ä¾èµ–å®‰è£…å¤±è´¥

### Q2: Streamlit Cloudéƒ¨ç½²å¤±è´¥

**è§£å†³æ–¹æ³•**:
1. æ£€æŸ¥ `requirements.txt` æ˜¯å¦æ­£ç¡®
2. ç¡®ä¿ `app.py` è·¯å¾„æ­£ç¡®
3. éªŒè¯å¯†é’¥é…ç½®

### Q3: æ•°æ®åº“è¿æ¥å¤±è´¥

**æ£€æŸ¥**:
- æ•°æ®ç›®å½•æƒé™
- SQLiteæ–‡ä»¶è·¯å¾„
- PostgreSQLè¿æ¥å­—ç¬¦ä¸²

### Q4: APIè°ƒç”¨å¤±è´¥

**åŸå› **:
- MCP_API_KEYæœªé…ç½®æˆ–æ— æ•ˆ
- ç½‘ç»œè¿æ¥é—®é¢˜

**è§£å†³**:
- æ£€æŸ¥ `secrets.toml` ä¸­çš„APIå¯†é’¥
- æµ‹è¯•APIè¿æ¥: `curl https://stargate.yingmi.com/mcp/health`

## ğŸ“ éƒ¨ç½²åæ£€æŸ¥æ¸…å•

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] ç”¨æˆ·å¯ä»¥æ³¨å†Œå’Œç™»å½•
- [ ] åŸºé‡‘æœç´¢åŠŸèƒ½æ­£å¸¸
- [ ] æ•°æ®åº“å¯ä»¥ä¿å­˜æ•°æ®
- [ ] APIè°ƒç”¨æˆåŠŸ
- [ ] HTTPSé…ç½®ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- [ ] å®šæœŸå¤‡ä»½æ•°æ®åº“
- [ ] ç›‘æ§æ—¥å¿—å’Œæ€§èƒ½
- [ ] é…ç½®åŸŸåï¼ˆå¯é€‰ï¼‰

## ğŸ”„ æ›´æ–°åº”ç”¨

### Dockeréƒ¨ç½²æ›´æ–°

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
docker-compose up -d --build
```

### Streamlit Cloudæ›´æ–°

```bash
# æ¨é€ä»£ç å³è‡ªåŠ¨éƒ¨ç½²
git push origin main
```

### Herokuæ›´æ–°

```bash
# æ¨é€ä»£ç 
git push heroku main
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

é‡åˆ°é—®é¢˜ï¼Ÿ

- **æ–‡æ¡£**: æŸ¥çœ‹ README_WEB.md
- **é‚®ç®±**: support@example.com
- **GitHub**: æäº¤Issue

---

**ç¥éƒ¨ç½²é¡ºåˆ©ï¼** ğŸš€
